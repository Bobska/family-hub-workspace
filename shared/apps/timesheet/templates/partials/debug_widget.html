{% comment %}
Unified Debug Widget for Shared Timesheet Templates

Automatically adapts display based on deployment mode:
- Standalone Mode: Orange banner
- FamilyHub Integrated Mode: Purple banner

Single source of truth for debug information across both platforms.
{% endcomment %}

{% load debug_tags %}

{% if debug %}
<!-- Dynamic Debug Banner - Color changes based on deployment mode -->
<div id="debug-widget" style="
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    background: {{ app_info.color }};
    color: white;
    padding: 8px 16px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 12px;
    border-bottom: 2px solid rgba(255,255,255,0.3);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display: flex; align-items: center; gap: 12px;">
            <i class="{{ app_info.icon }}" style="font-size: 14px;"></i>
            <span style="font-weight: 600;">{{ app_info.name }}</span>
            <span style="
                background: rgba(255,255,255,0.2);
                padding: 2px 8px;
                border-radius: 12px;
                font-size: 10px;
                font-weight: 500;
            ">{{ app_info.mode }}</span>
        </div>
        
        <div style="display: flex; align-items: center; gap: 16px; font-size: 11px;">
            <span>ğŸŒ Port {{ app_info.port }}</span>
            <span>ğŸ“± {{ template_info.name }}</span>
            <span>ğŸ•’ {{ current_time|date:"H:i:s" }}</span>
            <button onclick="document.getElementById('debug-widget').style.display='none'" 
                    style="background: none; border: none; color: white; cursor: pointer; font-size: 16px; padding: 0;">Ã—</button>
        </div>
    </div>
    
    <!-- Mode-specific additional info -->
    <div style="margin-top: 4px; font-size: 10px; opacity: 0.9;">
        {% if app_info.mode == 'STANDALONE' %}
        ğŸ”¶ Standalone Development Mode - Orange Theme
        {% else %}
        ğŸŸ£ FamilyHub Integrated Mode - Purple Theme
        {% endif %}
        | ğŸ“ Template: {{ template_info.path }}
        | ğŸ”§ Debug: {{ debug|yesno:"ON,OFF" }}
    </div>
</div>

<!-- Dynamic CSS based on mode -->
<style>
    body { margin-top: 60px !important; }
    
    .debug-{{ app_info.mode|lower }} {
        border-left: 4px solid {{ app_info.color }};
    }
    
    .debug-info {
        background: {{ app_info.color }}15;
        border: 1px solid {{ app_info.color }}30;
        border-radius: 8px;
        padding: 12px;
        margin: 16px 0;
        font-size: 12px;
    }
    
    .debug-info h6 {
        color: {{ app_info.color }};
        margin: 0 0 8px 0;
        font-weight: 600;
    }
</style>
{% endif %}
