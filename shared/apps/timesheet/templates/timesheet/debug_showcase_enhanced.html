{% extends 'timesheet/base.html' %}
{% load timesheet_debug_tags %}

{% block title %}Debug Showcase - Timesheet{% endblock %}

{% block content %}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h1 class="h2 mb-4">
                <i class="fas fa-bug me-2 text-danger"></i>Debug Showcase
                {% debug_highlight "Enhanced Debug System" %}
            </h1>
            <p class="lead">
                This page demonstrates all available debug template tags and features.
            </p>
        </div>
    </div>

    <!-- Template Debug Information -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-info-circle me-2"></i>Template Information
                    </h5>
                </div>
                <div class="card-body">
                    {% template_info "debug_showcase.html" True %}
                    {% show_template_path %}
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-layer-group me-2"></i>Template Hierarchy
                    </h5>
                </div>
                <div class="card-body">
                    {% template_hierarchy %}
                </div>
            </div>
        </div>
    </div>

    <!-- Context Variables -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-database me-2"></i>Context Variables Debug
                    </h5>
                </div>
                <div class="card-body">
                    {% debug_context_vars "request" "user" "app_info" "debug" %}
                    
                    <h6 class="mt-3">Variable Type Examples:</h6>
                    <ul class="list-unstyled">
                        <li><strong>User object type:</strong> {{ user|debug_type }}</li>
                        <li><strong>Request method:</strong> {{ request.method|debug_highlight }}</li>
                        <li><strong>App info keys:</strong> {{ app_info|debug_length }} properties</li>
                        <li><strong>Debug mode:</strong> {{ debug|debug_highlight }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Detection -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-desktop me-2"></i>Platform Detection
                    </h5>
                </div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr>
                            <td><strong>Deployment Mode:</strong></td>
                            <td>{% debug_highlight app_info.mode %}</td>
                        </tr>
                        <tr>
                            <td><strong>Platform Name:</strong></td>
                            <td>{{ app_info.name|debug_highlight }}</td>
                        </tr>
                        <tr>
                            <td><strong>Theme Color:</strong></td>
                            <td><span style="background: {{ app_info.color }}; color: white; padding: 2px 8px; border-radius: 3px;">{{ app_info.color }}</span></td>
                        </tr>
                        <tr>
                            <td><strong>Port:</strong></td>
                            <td>{{ app_info.port|debug_highlight }}</td>
                        </tr>
                        <tr>
                            <td><strong>Icon:</strong></td>
                            <td><i class="{{ app_info.icon }}"></i> {{ app_info.icon }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-cogs me-2"></i>Debug Context
                    </h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        {% debug_context %}
                    </div>
                    
                    <h6>Current Session Info:</h6>
                    <ul class="list-unstyled">
                        <li><strong>User:</strong> {{ user.username|default:"Anonymous"|debug_highlight }}</li>
                        <li><strong>Is Authenticated:</strong> {{ user.is_authenticated|debug_highlight }}</li>
                        <li><strong>Request Path:</strong> {{ request.path|debug_highlight }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Filter Examples -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-warning">
                <div class="card-header bg-warning">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-filter me-2"></i>Debug Filter Examples
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6>Text Highlighting:</h6>
                            <p>Normal text and {{ "highlighted text"|debug_highlight }}</p>
                        </div>
                        <div class="col-md-4">
                            <h6>Type Detection:</h6>
                            <p>String type: {{ "hello"|debug_type }}</p>
                            <p>Boolean type: {{ True|debug_type }}</p>
                        </div>
                        <div class="col-md-4">
                            <h6>Length Detection:</h6>
                            <p>String length: {{ "hello world"|debug_length }}</p>
                            <p>User object: {{ user|debug_length }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Tools Actions -->
    <div class="row">
        <div class="col-12">
            <div class="card border-dark">
                <div class="card-header bg-dark text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-tools me-2"></i>Debug Tools & Actions
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-flex gap-3 flex-wrap">
                        <a href="{% url 'timesheet:dashboard' %}" class="btn btn-primary">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                        <a href="{% url 'timesheet:daily_entry' %}" class="btn btn-success">
                            <i class="fas fa-calendar-day me-1"></i>Daily Entry
                        </a>
                        <a href="{% url 'timesheet:job_list' %}" class="btn btn-info">
                            <i class="fas fa-briefcase me-1"></i>Jobs
                        </a>
                        <button onclick="showDebugInfo()" class="btn btn-secondary">
                            <i class="fas fa-info me-1"></i>Console Debug
                        </button>
                    </div>
                    
                    <div class="mt-3 p-3 bg-light border rounded">
                        <h6>Debug Instructions:</h6>
                        <ul class="mb-0">
                            <li>The debug banner at the top shows template and platform info</li>
                            <li>Debug widgets are only visible when <code>DEBUG = True</code></li>
                            <li>Template tags automatically adapt to platform mode</li>
                            <li>Purple banner = FamilyHub integrated, Orange banner = Standalone</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
function showDebugInfo() {
    console.group('üêõ Timesheet Debug Information');
    console.log('Platform:', '{{ app_info.name }}');
    console.log('Mode:', '{{ app_info.mode }}');
    console.log('Port:', '{{ app_info.port }}');
    console.log('Color:', '{{ app_info.color }}');
    console.log('Debug Mode:', {{ debug|yesno:"true,false" }});
    console.log('Current User:', '{{ user.username|default:"Anonymous" }}');
    console.groupEnd();
}

// Auto-show debug info on page load
document.addEventListener('DOMContentLoaded', function() {
    console.log('üîß Debug Showcase loaded - {{ app_info.name }} ({{ app_info.mode }})');
});
</script>
{% endblock %}
