{# 
Shared User Menu Template
Can be used by both standalone and integrated modes
Adapts based on context
#}

<!-- User Authentication Menu -->
{% if user.is_authenticated %}
<ul class="navbar-nav">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
            {% if integrated_mode %}
                <i class="bi bi-person-circle me-1"></i>{{ user.username }}
            {% else %}
                <i class="fas fa-user-circle me-1"></i>{{ user.username }}
            {% endif %}
        </a>
        <ul class="dropdown-menu">
            {% if user.is_staff %}
                <li><a class="dropdown-item" href="{% url 'admin:index' %}">
                    {% if integrated_mode %}
                        <i class="bi bi-gear me-1"></i>Admin Panel
                    {% else %}
                        <i class="fas fa-cog me-1"></i>Admin Panel
                    {% endif %}
                </a></li>
                <li><hr class="dropdown-divider"></li>
            {% endif %}
            <li>
                {% if integrated_mode %}
                    <a class="dropdown-item" href="{% url 'logout' %}">
                        <i class="bi bi-box-arrow-right me-1"></i>Logout
                    </a>
                {% else %}
                    <form method="post" action="{% url 'logout' %}" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" class="dropdown-item logout-btn border-0 bg-transparent">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </button>
                    </form>
                {% endif %}
            </li>
        </ul>
    </li>
</ul>
{% else %}
<ul class="navbar-nav">
    <li class="nav-item">
        <a class="nav-link" href="{% url 'login' %}">
            {% if integrated_mode %}
                <i class="bi bi-box-arrow-in-right me-1"></i>Login
            {% else %}
                <i class="fas fa-sign-in-alt me-1"></i>Login
            {% endif %}
        </a>
    </li>
</ul>
{% endif %}
